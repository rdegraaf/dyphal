2017-01-01  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Reference bug 2014-06-06_001 instead of 
      repeating its details.

2017-01-01  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Only show the "Generate Album" button if there 
      is at least one photo in the album.

2017-01-01  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Track whether the current album has been 
      modified since last save, and if so, prompt before exiting or loading 
      a new album.

2016-12-31  Rennie deGraaf <rennie.degraaf@gmail.com>

    * bumpversion.sh: Deleted, as it is no longer needed since the changes to 
      install.sh from 2016-12-21.

2016-12-31  Rennie deGraaf <rennie.degraaf@gmail.com>

    * install.sh, INSTALL, tools/DyphalGenerator.py: Allow the configuration 
      file path to be set by the installation script.

    * install.sh, INSTALL: Document that install.sh requires a git tree.

2016-12-31  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Use QThread.idealThreadCount() to set the 
      number of worker threads.

2016-12-31  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Warn on exit if there is a background task in 
      progress.  I had to add the completion tasks to the cancellation list 
      and add an option to force the post-task UI cleanup to make everything 
      work correctly.

2016-12-21  Rennie deGraaf <rennie.degraaf@gmail.com>

    * install.sh: Programmatically generate version strings and release dates 
      from git metadata at install-time and insert them into the appropriate 
      places, rather than relying on manual updates to the files.

    * README, tools/DyphalGenerator.py, tools/gthumb-comment-update.py,
      www/index.html: Replace the out-of-date version string with a 
      placeholder.

    * tools/photorename.sh: Add a version string placeholder.
      
2016-12-21  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.ui, tools/DyphalGenerator.py: Added a "New" button 
      to the GUI to clear and start a new album.

    * tools/DyphalGenerator.py: Clear everything before loading an album.

    * tools/DyphalGenerator.py: Move the current album name from the Config 
      object to the GUI object.

    * tools/DyphalGenerator.ui: Remove the unnecessary padding around the 
      photo list and its buttons.

    * tools/DyphalGenerator.ui: Make the description field taller than the 
      title and footer fields.

    * tools/DyphalGenerator.ui: Remove the stylesheets from addCaptionButton 
      and addPropertyButton, since they didn't seem to do anything and were 
      causing the buttons' icons to be mis-aligned.

2016-12-21  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/util.py: Null out the correct object when destroying a RefCounted.

2016-12-21  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Move photo object deletion to the background, 
      because that involves I/O.  

    * tools/DyphalGenerator.py: Deselect everything before removing selected 
      photos, which speeds up photo removal tremendously.

2016-12-20  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Handle the correct exception when exiftool and 
      convert aren't found (bug 2016-03-20_001)

2016-12-20  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Don't prompt for overwrite confirmation when 
      re-saving an existing album.  QFileDialog can't do that natively, so I 
      had to break out the confirmation prompt logic.

    * tools/DyphalGenerator.py: Put the curent album name in the title bar.

    * INSTALL: Better language around Python and PyQt requirements.

2016-12-19  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: keep track of the current album file and 
      pre-populate the file name in the save dialog when re-saving.

2016-12-19  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py, tools/photo.py: sort JSON fields on save for 
      better interaction with version-controlled outputs.

2016-12-19  Rennie deGraaf <rennie.degraaf@gmail.com>

    * www/album.css: Preserve newlines in album descriptions.

2016-12-19  Rennie deGraaf <rennie.degraaf@gmail.com>

    * install.sh: Updated the installation location to python3.5, since 
      Python doesn't seem to have a version-agnostic installation directory.

2016-03-20  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: correction to a string.

2015-08-29  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/gthumb-comment-update.py: Relaxed the requirement that the 
      interpreter be specifically Python 3.3 to some Python 3 version.

    * install.sh: Updated the installation location to python3.4, since Python 
      doesn't seem to have a version-agnostic installation directory.

2015-08-01  Rennie deGraaf <rennie.degraaf@gmail.com>

    * tools/photo.py: Corrected a comment.

2015-07-16  Rennie deGraaf <rennie.degraaf@gmail.com>

    * www/index.html: Added `rel` attributes to hyperlinks.

    * www/dyphal.js: Replaced a bunch of calls to `setAttribute()` with writes 
      to built-in DOM properties.

2015-04-24  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * README, tools/DyphalGenerator.py, tools/gthumb-comment-update.py, 
      tools/photo.py, tools/photorename.sh, tools/ui-header.py, tools/util.py, 
      www/album.css, www/common.css, www/debug.css, www/dyphal.js, 
      www/index.html, www/photo.css: Updated date stamps to 2015.

    * README: Replace "URL" with the more pedantically-correct "URI".

    * www/index.html: Use "self-closing" tags consistently on HTML5 void 
      elements.

    * INSTALL: Documented photorename.sh's dependency on jhead.

2015-04-24  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Replaced the stylesheet-swapping layout changes with 
      class-swapping on the `body` element, in order to work around an 
      IE/Spartan CSP bug (2014-12-31_001).  This simplified the code 
      considerably and made bugs 2014-01-10_001 and 2014-01-17_001 irrelevant.  
      Down-side: clients always have to load every stylesheet (including debug).

    * www/album.css, www/debug.css, www/photo.css: body.{album,photo,debug} 
      descendent selectors on everything for the new layout-changing mechanism. 

    * www/common.css: Moved some properties from `html` to `body` so that they 
      can be overridden by changing the class on the `body` element.

    * www/dyphal.js: Replaced some `elmt.setAttribute("class", ...)` calls with 
      `elmt.className = ...`. 

    * www/debug.css: Removed an invalid style property.

    * README: Updated notes on browser-detection because one of the cases was 
      removed.

2015-04-21  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py: Typo correction.

2014-09-01  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: The Android 4.4.2 browser on my Galaxy S3 was calling 
      unloadDebug() when not in a debug state, resulting in null parentNode 
      dereferences.

    * www/dyphal.js: The Android 4.4.2 browser on my Galaxy S3 still doesn't 
      support load events on link elements, despite this bug supposedly having 
      been fixed in 4.4.  Use the workaround on all Android browsers for now. 

    * www/dyphal.js, www/index.html: Renamed "compressed" layout to "compact" 
      to match what I call it elsewhere.  I think that I got all of them this 
      time.

    * www/photo.css: Make the footer panel shorter in landscape compact layout. 

    * www/dyphal.js: In compact layout, limit the height of the caption and 
      property panels to the height of the screen less the height of the 
      footer. 

2014-09-01  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/photorename.sh: Ensure that photos are writable.

    * tools/gthumb-comment-update.py: Handle missing fields in gthumb XML 
      comment files.

    * README: Added a design principle.

    * README: Added a link to my demo album.

    * README: Renamed the "compressed" layout to "compact" to match what I call 
      it elsewhere.

2014-05-28  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * photorename.sh: Make sure to remove *all* execute permissions, not just 
      the user's.

    * album.css, common.css, debug.css, dyphal.js, photo.css: reduce the 
      threshold for compact layout to 750 pixels, because some normal laptop
      displays are smaller than 800 CSS-pixels.

    * .gitignore: New file.

    * README: Added lists of the property and caption fields supported by 
      DyphalGenerator.

    * README: Obfuscated my email address.

2014-05-24  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Fixed a jslint warning.

    * tools/photo.py: Fixed a bug when parsing properties of photos with 
      exposures longer than one second.

    * www/index.html: Removed another reference to thumbnails from the tooltip 
      for the index button.

    * www/index.html, www/common.css: Added a tooltip for the help button.

    * www/photo.css: Set contentPanel to clip overflow, so that browsers don't 
      flash a scrollbar before fitPhoto() is called when the photo is too big 
      to fit in the window.

    * tools/DyphalGenerator.py: Un-encode the file URIs from gThumb collection 
      files.

    * tools/photo.py, tools/gthumb-comment-update.py: gThumb stores IPTC 
      strings as UTF-8, but doesn't set the IPTC character set.  Override the 
      default IPTC character set in exiftool, and set the IPTC character set 
      when writing any IPTC tags.

2014-05-22  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Changed the swipe-detection logic to be based on an X/Y 
      ratio rather than absolute thresholds, in order to improve swipe 
      recognition.

2014-05-21  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/common.css: Left-aligned some text some text in the help and readme 
      pages.

    * www/dyphal.js: Android doesn't reliably return to page content when the 
      help overlay is suppressed, sometimes leaving the user staring at a blank 
      white screen.  Force a return to the top of the document when an overlay 
      is suppressed.

    * www/dyphal.js: Android doesn't support obj.click().  In order to handle 
      Android devices with keyboards, fire a click event the old-fashioned way. 

    * www/dyphal.js: IE 8 doesn't support window.innerWidth.  Fall back to 
      document.documentElement.clientWidth if it's not present.

2014-05-19  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/photo.css: Added a top border to footerPanel in compact layout, to 
      match captionPanel and propertyPanel.

    * www/dyphal.js: Use the "keydown" event rather than the "keypress" event 
      in order to support browsers other than Firefox.

    * www/dyphal.js, www/photo.css: Overlays were not appearing properly on 
      Android <4.4.  It seems to not repaint elements whose styles change due 
      to a checkbox changing state.  Worked around it by always touching some 
      layout-related property when an overlay needs to appear or disappear.

    * www/index.html: Fixed an improperly closed tag.

2014-05-18  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py, tools/util.py: DyphalGenerator failed if a user 
      attempted to install the template while an album was being generated, 
      because the template installer tried to create a symlink that already 
      existed.  Fixed it by removing the symlinks to directories, using the 
      /proc paths for output, and having tasks call a lambda to get their 
      output paths on demand rather than generating them up front.

    * tools/DyphalGenerator.py: Set the umask to 022 so that generated files 
      are world-readable.

    * tools/photorename.sh: Rotate photos to the top-left orientation.

    * www/dyphal.js: Renamed the album list from "album-list.html" to 
      "albums.html".

    * www/index.html: Removed the reference to thumbnails from the tooltip for 
      the index button.

2014-05-15  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/common.css, www/dyphal.js, www/index.html, www/photo.css: Use HTML + 
      CSS to show/hide the overlay and help text rather than JavaScript.  This 
      removes most of the layout-related JavaScript code.

    * www/dyphal.js (fitPhoto): More tweaks to the photo sizing code:  the 
      photo wasn't displayed at its full size even when the window was big 
      enough.

    * www/dyphal.js (fitPhoto): More tweaks to the photo sizing code:  when the 
      photo was bigger than the window, the window size used when scaling the 
      overlay included scrollbars on some Chrome and IE.

    * www/dyphal.js: jslint cleanup.

2014-05-13  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Ensure that photo and album stylesheets are loaded before 
      loading any content.  Hide all content while swapping stylesheets.  This 
      should prevent things from flickering in the wrong places while loading. 

    * www/common.css: Removed an unnecessary property.

    * tools/gthumb-comment-update.py, tools/photorename.sh: Cleaned up some 
      blank lines.

    * tools/photorename.sh: Header text.

2014-05-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Wrote a work-around for Android's broken touchend events. 

    * README: Mentioned that browser detection is used to work around Android's 
      broken touchend events.

    * www/index.html: Commented on horizontal scrolling by touch.

2014-05-11  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js: Added an attempt at a workaround for the failure of touch 
      events to work on IE.  I have no idea if it works, because I don't have a 
      Surface.

2014-05-10  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/photorename.sh: New file, containing a script to encode a camera 
      name into photo file names in place of meaningless strings like "IMG".

    * install.sh: Install photorename.sh.

2014-05-10  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/gthumb-comment-update.py: Added support for writing metadata back 
      out, docstrings, and misc. cleanup and bug fixes.  It seems to work now. 

    * tools/gthtime.sh: Removed, as its functionality has been replaced by 
      tools/gthumb-comment-update.py.

    * install.sh: Install gthumb-comment-update.

    * bumpversion.sh: Set version and date strings in gthumb-comment-update.py.

2014-05-10  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/gthumb-comment-update.py: New file, containing a tool to set time 
      zones on timestamps in photo metadata, and to convert the various comment 
      formats used by different gersions of gThumb to the format expected by 
      DyphalGenerator.  Not yet complete.

    * test/*: Moved to test/album/.

    * test/comments/*: New files to test gthumb-comment-update.py.

2014-04-28  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js:  Fixed the logic to remove the width override on 
      titlePanel when in compressed layout.

    * www/album.css, www/common.css, www/debug.css, www/dyphal.js, 
      www/photo.css: Changed the threshold for compressed layout from 600 px to 
      800 px.

    * www/dyphal.js (touchStart, touchEnd): Added a maximum time over which a 
      swipe may occur to be recognized.

    * www/dyphal.js: Renamed "smallScreen" to "compressed".

    * README, www/index.html: Documented the compressed layout.

2014-04-27  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * bumpversion.sh: Commit before creating the tag so that the modified dates 
      and versions are in the tag.

    * www/common.css: Added title font overrides for some other screen sizes.

    * www/common.css: Made the width adjustment for title and footer text apply 
      to normal mode as well as small mode.

    * www/dyphal.js: Fixed the small screen detection logic; it should match 
      the CSS media selectors now.

2014-04-26  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * bumpversion.sh: New script to set the date and version tags in README, 
      www/index.html, and tools/DyphalGenerator.py, and to optionally create 
      a new tag in git.

    * install.sh, install-www.sh: Set execute permission.

    * Version 3.0-beta1

2014-04-26  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.ui: Added tooltips to some controls that were 
      missing them.

    * test/album.json: Made the title longer so that it'll wrap on small 
      screens.

    * www/dyphal.js, www/photo.css: Fixed some photo sizing issues that caused 
      the window to show a scrollbar in some situations.

2014-04-26  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/dyphal.js (fitPhoto, showPhotoOverlay): Got rid of all calls to 
      getObjHeight, getObjWidth, getHBorder, and getVBorder, since the 
      clientHeight, clientWidth, offsetHeight, and offsetWidth properties work 
      in every browser that I support.

    * www/lib.js, www/dyphal.js: Moved all remaining functions from lib.js to 
      dyphal.js.  Removed lib.js.

    * tools/DyphalGenerator.py, www/index.html, README: Removed references to 
      lib.js.

    * www/dyphal.js (fitPhoto): Fixed the aspect dimension calculations for 
      the overlay photo.

    * www/dyphal.js (fitPhoto, showPhotoOverlay): Decide whether to show the 
      overlay in showPhotoOverlay rather than special-casing photos that are 
      already displayed at full size in fitPhoto.

    * www/dyphal.js: Wrapped everything in a closure to avoid having a global 
      "page" that was getting inexplicably stomped on by the Android 4.3 
      browsers on Samsung devices.  Closed bug 2014-04-19_001.

    * www/index.html: Removed the copyright tag from the help text because it's 
      covered in README.

    * www/common.css: Fixed some rendering issues in small-screen mode.

2014-04-21  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/DyphalGenerator.py (DyphalUI._generateAlbum): Added a check for the 
      file dialog being cancelled to resolve bug 2014-04-19_002.  I think that 
      cancellation is handled for all file dialogs now.

    * www/dyphal.js, www/lib.js: Rearranged and re-bracketed to make 
      www.jslint.com complain less.

2014-04-19  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/common.css: Reduced the title font size for small screens regardless 
      of orientation, rather than just for landscape.

    * www/common.css: Reduced the width of footerContent to 95% so that it 
      doesn't overflow on Android.

    * www/common.css: Narrowed the margin of helpText and readmeText on small 
      screens.

    * www/photo.css: Extended the small-screen layout to support photo view.  
      Closed bug 2014-01-17_002.

    * www/javascript.html, misc/html5.pandoc: Added meta headers to better 
      support mobile browsers and IE.

    * www/dyphal.js, www/lib.js: Cleanup.

    * README: Added information on generating and serving albums.

    * www/javascript.html: Moved information on server headers to README.

2014-04-19  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/gthtime.sh: New file containing a script to fix the timestamps 
      saved by gthumb.

    * www/javascript.html: New file containing a description of why and how 
      Dyphal uses JavaScript.

    * tools/DyphalGenerator.py: Update to the names of file names to install.

    * www/common.css: Increase the font size for help and readme text.

    * www/album.css, www/common.css, www/dyphal.js, www/index.html: Added a new 
      layout optimized for small screens (album view only for now).

    * README: Linked to javascript.html.

2014-04-13  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js: Renamed to www/dyphal.js.

2014-04-13  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js, www/lib.js, www/ie8compat.js: Cleaned up most jslint 
      warnings.

    * Added a GPLv2 header to all code files.

    * LICENCE: New file containing the GNU GPLv2.

    * README: Added licence and contact information.

    * ui-header.py: New file containing header text for ui.py, which is 
      generated at install-time from tools/DyphalGenerator.ui.

    * install.sh: Use ui-header.py as a header for ui.py.

2014-04-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * Replaced the test files with a better set of photos with various 
      different combinations of caption and property fields, various different 
      date formats, different sizes and aspect ratios, and special characters 
      in their names.  Removed the old files.

    * tools/DyphalGenerator.py (DyphalUI._addPhotosHandler): Added a check to 
      ensure that the gThumb catalog version is supported.

    * tools/photo.py (format_display_time): Handle timestamps with no time 
      zones.  Use RFC 3339 conventions for time zones.

    * www/album.js (fitPhoto): Make the overlay photo slightly smaller to 
      compensate for a few pixels that haven't been able to account for in 
      Firefox.

    * install-www.sh: New file; a script to install the web template files 
      without needing to run DyphalGenerator.

    * deploy.sh: Removed, replaced with install-www.sh

2014-04-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * Renamed the project to "Dyphal", for "Dynamic Photo Album".  Changed 
      documentation, comments, strings, class names, file names, etc. to 
      reflect this change.

    * tools/AlbumGeneratorUI.ui: Renamed to tools/DyphalGenerator.ui.

    * tools/AlbumGenerator.py: Renamed to tools/DyphalGenerator.py.

    * notes.txt: Removed.

2014-04-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/AlbumGenerator.py (PhotoAlbumUI): Added a count of background 
      activities so that starting a second background activity while another 
      one is in progress doesn't fail an assertion or stomp on the first one's 
      progress count.  (bug 2014-04-08_002)

    * www/AlbumGenerator.py (PhotoAlbumUI._installTemplate): Handled 
      cancellation of the directory chooser dialog.

    * www/AlbumGenerator.py (PhotoAlbumUI): Moved all file I/O from _loadAlbum 
      to a background task.  Populating the UI still needs to happen on the 
      foreground thread because I have no model-view separation.  (bug 
      2014-04-09_001)

    * www/AlbumGenerator.py (PhotoAlbumUI._showError): Changed the message box 
      icon for background activity errors from 'question' to 'warning'.

    * INSTALL: New file containing installation instructions.

    * misc/html5.pandoc: New file containing a pandoc template for converting 
      README to html.

    * install.sh: Generate an HTML version of README and install it with the 
      web files.

    * www/common.css: Set the color for link text to something that's visible 
      on the gray background but doesn't clash too badly.  Set the color for 
      active links to the background color so that we don't get a red border 
      that flashes around thumbnails when they're clicked upon.  Unfortunately, 
      this makes text links disappear when active.

    * www/common.css: Set a top margin on helpText because other browsers don't 
      show the top margin that Firefox gets somewhere.

    * www/common.css: Re-use the help text styles for the HTML readme.

    * www/index.html: Link the HTML readme from the help panel.

2014-04-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.html: Renamed to www/index.html so that the URL format 
      shouldn't need to change when I add an index view in the future.

    * www/album.js: Changed the album arguments syntax from "#album,page,debug" 
      to "#/album/page/debug".  To load an album from a subdirectory, you'll 
      need to double-encode it; for example, to load the first photo from 
      "subdir/album.json", use the arguments "#/subdir%252falbum/1".

    * www/album.js (start): Added a kludge to work around the lack of an album 
      view: loading the album with no arguments triggers a redirection to 
      "album-list.html", which the operator is responsible for writing.

    * README: Updated the description of URL syntax to match the changes 
      described above and changed the example to match AlbumGenerator's output. 

    * README: Fixed some markup issues in the Security Model section.

    * www/album.js: Replaced all calls to getElementsByClass() with 
      document.querySelectorAll(), which works in IE8.

    * www/lib.js: Removed getElementsByClass().

2014-04-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/photo.py: New file.

    * tools/photo.py, tools/AlbumGenerator.py: Moved PhotoFile and supporting 
      code to photo.py.

    * tools/AlbumGenerator.py: Stopped attempting to get the program to load 
      under Python 2.x, since it seems that getting the imports to work 
      correctly will be too much hassle.

    * tools/AlbumGenerator.py: Moved most of the global constants to Config.  
      Moved the FILTER_* strings to PhotoAlbumUI.  The two remaining global 
      constants are there because they might be re-written by the installation 
      script and that's simpler if they have no indentation.

    * tools/AlbumGeneratorUI.ui: Moved the Add Caption and Add Properties 
      buttons to beside their respective delete buttons and moved the Show All 
      checkboxes to new rows.

2014-04-09  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/util.py: New file to contain simple utility functions and classes.  

    * tools/util.py: Wrote a base class to implement COM-style reference 
      counting.

    * tools/util.py, tools/AlbumGenerator.py: Moved handle_exceptions and 
      ensure_directory to util.py.

    * tools/AlbumGenerator.py: Added reference counting to PhotoFile so that 
      photos can be safely removed from the list while an album is being 
      generated in the background.

    * BUGS: Turned the bug dates into unique bug IDs.

    * README: Documented the security assumptions about the JSON file emitted 
      by AlbumGenerator.

2014-04-08  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/AlbumGenerator.py: Implemented photo and thumbnail generation.  

    * tools/AlbumGenerator.py: Moved the maximum number of worker threads into 
      the configuration file.

    * tools/AlbumGenerator.py: Added url encoding of all JSON fields that are 
      used to build URLs.

    * README: Added a description of the security model.

    * tools/AlbumGenerator: (PhotoFile.generateJSON), www/album.js 
      (loadPhotoContent), test/img000.jpeg.json, test/img_0281.jpg.json, 
      test/img_2235.jpg.json: Changed the encoding of the properties list in 
      photo JSON to ensure that they're stored in the order selected in the UI.

    * tools/AlbumGenerator.py (PhotoAlbumUI._showProperties): Fixed a bug that 
      caused an exception to be thrown if the user used Ctrl-A to select all 
      photos without ever having selected a single photo.

    * tools/AlbumGenerator.py (PhotoFile): Don't set _linkPath before creating 
      the link, because otherwise if the link already exists, we'll get 
      FileExistsError and then delete it when handling the exception, breaking 
      the other PhotoFile instance that owns it.

2014-04-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/AlbumGenerator.py: Re-formatted the code to approximately follow 
      Python standards (http://legacy.python.org/dev/peps/pep-0008/) and added 
      better docstrings.  Ran pylint and fixed some of the things that it 
      warned about.

    * Removed various commented-out code.

    * install.sh, tools/AlbumGenerator.py: Moved the UI package to the standard 
      user packages directory and removed the sys.path hack.

    * install.sh, tools/AlbumGenerator.py: Renamed the "AlbumGenerator" package 
      to "album_generator" because Python's import system doesn't seem to work 
      properly when a package has the same name as the main file.  In 
      particular, pydoc3 didn't work.

    * tools/AlbumGenerator.py, tools/AlbumGeneratorUI.ui: Renamed 
      "descriptions" to "captions".

2014-04-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * tools/AlbumGenerator.py: Merged _bgGenerateAlbumComplete() and 
      _bgInstallTemplateComplete(), as they were essentially the same.

    * tools/AlbumGenerator.py, www/album.js: Move photo JSON, photo, and 
      thumbnail files into separate subdirectories.  Added background tasks to 
      ensure that these directories exist before we try to write to them.

    * tools/AlbumGenerator.py: Changed the name of photo JSON files to include 
      the full photo file name, as is expected by the JavaScript.

    * tools/AlbumGeneratorUI.ui, tools/AlbumGenerator.py: Added a splitter 
      between the photo list and the photo properties.

    * tools/AlbumGenerator.py: Removed the code that passed around a directory 
      file descriptor because the shell commands that I need to call to 
      generate photos and thumbnails can't work with a file descriptor.  
      Replaced it with code that opens the output directory (in a background 
      thread), symlinks to its /proc entry, and writes files through the 
      symlink.  

    * tools/AlbumGenerator.py: Ignore any errors while closing a file 
      descriptor or removing a symlink.

    * tools/AlbumGenerator.py: fixed a bug that prevented unknown exceptions 
      during background tasks from being displayed in the UI.

2014-03-28  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * AlbumGenerator/AlbumGenerator.py: Renamed to tools/AlbumGenerator.py.

    * AlbumGenerator/AlbumGeneratorUI.ui: Renamed to tools/AlbumGeneratorUI.ui.

    * AlbumGenerator/build.sh: Renamed to install.sh.

    * tools/AlbumGenerator.py: Implemented template installation.

    * install.sh: Wrote a decent installation procedure.

    * I made some other changes, but all the renaming is making it difficult to 
      get a useful diff.

2014-03-27  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * AlbumGenerator/AlbumGeneratorUI.io: Set a window icon that actually loads.

    * AlbumGenerator/AlbumGenerator.py: Create the directory holding the config 
      file if it does not exist.

    * AlbumGenerator/AlbumGenerator.py: Check for the presence of exiftool and 
      convert at startup.

    * AlbumGenerator/AlbumGenerator.py: Implemented album re-loading.

    * AlbumGenerator/AlbumGenerator.py: Switched to prompting for the album 
      JSON file's name rather than for a directory when outputting albums.

    * AlbumGenerator/AlbumGenerator.py: Moved the ouput of the album JSON file 
      to a background thread.

    * AlbumGenerator/AlbumGenerator.py: When loading photos, if there is 
      already a photo in th album with the same name, prompt to rename or 
      remove it.

    * AlbumGenerator/AlbumGenerator.py: Only add caption or description fields 
      if they're not already selected.

2014-03-26  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * AlbumGenerator/AlbumGenerator.py (main): Added some logic to startup to 
      detect incompatible Python versions or a lack of /proc/<pid>/fd/...

    * AlbumGenerator/AlbumGenerator.py (PhotoFile): Fixed a bug where photo 
      JSON generation would fail for photos that lacked a selected caption or 
      property.

    * AlbumGenerator/AlbumGenerator.py (PhotoFile.generateJSON): Added a 
      representation of the original file path to the album JSON so that albums 
      can be re-loaded.

    * AlbumGenerator/AlbumGenerator.py: Save run-time configuration to a file 
      at exit.  Load it at startup.  Added the window size and UI data that is 
      likely to not change between albums to the configuration file.

    * AlbumGenerator/AlbumGeneratorUI.ui: Added stretch factors to layouts that 
      didn't have any.  Probably not necessary.

2014-03-24  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * AlbumGenerator/AlbumGeneratorUI.ui: Replaced the QComboBoxes for 
      addPhotosButton, addDescriptionButton, and addPropertyButton with 
      QPushButtons.

    * AlbumGenerator/AlbumGeneratorUI.ui: Changed the icon for cancelButton.

    * AlbumGenerator/AlbumGeneratorUI.ui: Added a new button to install the 
      album template.

    * AlbumGenerator/AlbumGeneratorUI.ui: Added a new QPlainTextEdit for the 
      album description.

    * AlbumGenerator/AlbumGeneratorUI.ui: Added a new QTextEdit to display the 
      properties of the selected photo.

    * AlbumGenerator/AlbumGeneratorUI.ui: Replaced the item spacing in 
      photosList with a padding style on list items to remove the gaps in 
      selectability.

    * AlbumGenerator/AlbumGenerator.py: Replaced the QComboBoxes for 
      addPhotosButton, addDescriptionButton, and addPropertyButton with 
      QPushButtons with attached menus.  I may need to revert that for 
      addCaptionButton and addPropertyButton if they can get too long.

    * AlbumGenerator/AlbumGenerator.py: Hooked up albumDescription to the JSON 
      generator.

    * AlbumGenerator/AlbumGenerator.py: Displayed the properties of the current 
      photo in photoProperties.

    * AlbumGenerator/AlbumGenerator.py: Added event filters to photosList, 
      descriptionsList, and propertiesList so that Escape can be used to 
      deselect everything and Delete removes the selected objects.

2014-03-23  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * AlbumGenerator/AlbumGenerator.py, AlbumGenerator/AlbumGeneratorUI.ui, 
      AlbumGenerator/build.sh: Initial checkin of a tool to generate the JSON 
      files, thumbnails, and scaled photos for albums.  About 60% complete.

    * Changelog: Added correct relative paths to file names.

    * www/lib.js: Fixed a typo in a comment.

    * README: A couple minor changes.

2014-02-08  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * README, www/album.html: Removed SVN keywords since they don't do quite 
      what I want: they give revision and date information for the file, not 
      for the repository. 

    * www/album.js: Disabled function call logging by default.

2014-02-08  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * TODO: New file.

    * www/album.js: Moved "todo" information to TODO.

    * README, www/album.html: Added the version number and SVN $Id$.

2014-02-06  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * test/img000.jpeg.json: Changed the caption to include a really long line 
      that will wrap around a couple times.

    * www/album.css: Moved display overrides to the top and removed some 
      unnecessary styles.

    * www/album.html: Added a paragraph to the help text about touch 
      navigation.

    * www/album.js: Added try-catch blocks to the handlers for touch events.

    * www/photo.css: Re-arranged some styles to reduce duplication and moved 
      core layout stuff to the top.

    * www/photo.css: Set the styling on captionItems to preserve newlines from 
      their text.

    * README: Fixed some markup problems.

    * deploy.sh: Build an HTML version of README and install it to WWWROOT.

2014-02-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js: Added navigation by left- and right- touch swipe in album 
      view.

2014-02-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.html, www/photo.css: Removed an unnecessary class.

    * www/common.css, www/photo.css, www/debug.css: Capped the width of 
      elements that are displayed in side columns and moved them towards the 
      middle if the caps are reached, so that the layout is less spread out on 
      wide windows.

2014-02-04  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.html: Set the viewport width to device-width to limit the 
      resizing of things when mobile browsers are rotated.

    * www/album.js (loadPhotoAfterStylesheet): Set the photo's src to "" before 
      setting it to the correct value to ensure that it changes.  Without this 
      fix, loading a photo, returning to album view, then opening the same 
      photo again will not show the photo because the load event doesn't fire 
      due to the src not changing.

2014-02-04  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js, www/lib.js: In browsers that are known to not fire load 
      events on link elements (ie, Android <4.4), poll for stylesheet readiness 
      then call the load event handlers whenever a load event on a stylesheet 
      is needed.

2014-01-23  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * README: Added some more content.

    * www/album.js, www/common.css: Tweaked some comments.

2014-01-23  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.css, www/common.css: Fixed the footer in album view.  Tested in 
      Chromium, Firefox, Konqueror, Opera, IE8, IE11, Android.

2014-01-18  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js: Added a bunch more debug logging.

    * www/album.js: Set event listeners before setting the target when loading 
      the debug and photo stylesheets.

2014-01-17  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js (loadPhotoAfterStylesheet): Fixed the intermittent failure 
      for the first photo to load.  It seems to have been due to a race between 
      the photo loading and the callback being registered.

    * www/album.js: Added some debug logging statements.

    * www/album.js (fitphoto): Removed some unreachable logic.

    * www/album.html: Set the default src for the photo to placeholder.png.

    * www/ie8compat.js: Switched to versions of the shims with a well-defined 
      licence.

2014-01-13  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * README: New file.

    * www/album.js: moved the design goals to README.

    * www/album.css, www/album.html, www/album.js, www/common.css, 
      www/debug.css, www/ie8compat.js, www/lib.js, www/photo.css: Changed the 
      file header comment format.

2014-01-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * ChangeLog: Created a stand-alone changelog.  Populated it from the svn 
      log.

    * BUGS: Moved the list of active bugs out of album.js.

2014-01-12  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/ie8compat.js: New file containing third-party work-arounds for IE 8's 
      lack of support for textContent, addEventListener, and 
      removeEventListener.

    * www/album.html: Conditionally include ie8compat.js in IE to work around 
      some of its limitations.

    * www/album.html: Added an X-UA-Compatible meta header to make IE stop 
      prompting for compatibility view.

    * www/album.html: Made some changes to the help text to reflect the fact 
      that there is now third-party code in the album.

    * www/album.js: When entering or exiting debug mode, return out of start() 
      immediately and enter it again from a callback after the debug-specific 
      elements have been added to or removed from the DOM in order to avoid 
      issues related to the order in which callbacks are serviced.

    * www/album.js: Removed an unnecessary variable assignment.

    * www/album.js: Delay setting helpVisible when showing the help screen, 
      since making the help screen visible can change the page dimensions and 
      we don't want the resulting call to fitPhoto() to immediately hide the 
      help screen again.

    * www/lib.js: Fall back to req.responseText if req.response doesn't exist on 
      JSON response objects.

    * www/lib.js: Convert property names from dashed-lowercase to camelCase in 
      getProperty() when using one of the eval fallbacks, because dashes aren't 
      valid characters in JavaScript identifiers.

    * www/lib.js: Removed the unused function getChildren().

2014-01-11  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/index.html: Renamed to album.html.

2014-01-11  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * deploy.sh: Moved the test album into a subdirectory, rather than the same 
      directory as the album source.

    * test/album.json: Made the description string longer.

    * www/album.js: Added support for albums in subdirectories.  The relative 
      path to the album JSON file is given in the argument, and we parse out 
      the directory and prefix it to other album objects as they are loaded.

    * www/album.css: Made colours more consistent between different parts of 
      the album.

    * www/album.js, www/common.css, www/debug.css, www/index.html, 
      www/photo.css: Removed some unnecessary classes and ids from the HTML, 
      replacing them with more advanced CSS selectors where necessary.

    * www/album.js: Set the height and width of the photo as CSS properties 
      rather than HTML properties.  I'm not sure why the HTML versions are 
      still allowed in HTML 5.

    * www/album.js: Apparently Firefox doesn't allow the "background-image" 
      property to be set using JavaScript.  "backgroundImage" works, though.

    * www/common.css, www/debug.css: Removed some unnecessary styles.

    * www/common.css, www/photo.css: Fixed a display bug in opera where text in 
      the navigation links would show up as little squiggles, despite using a 
      0-pt font.

    * www/debug.css: Added override styles for the help screen and description.

    * www/placeholder.png: New file, a 1x1 transparent PNG.

    * www/index.html: Set the initial targets of all links and images to 
      placeholder.png.

    * www/index.html, www/photo.css: Moved table column widths to CSS.

    * www/index.html: Made some changes to the help text.

2014-01-11  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * misc/arrows.svg: Added a question-mark icon.

    * www/help.png: New file.

    * www/album.js, www/index.html, www/common.css: Added a help view, which 
      can be toggled on or off from either the album or photo view.

    * www/album.css: Centered the description in the album view and capped its 
      width.

    * www/album.js: Handled the case where the debug parameter is present but 
      the debug stylesheet cannot be loaded; we'll just drop the debug 
      parameter and continue.

    * www/album.js: Fixed the stylesheet load order issue.

    * www/album.js: Put exception handlers on JavaScript callbacks that were 
      missing them.

    * www/common.css, www/photo.css: Navigation icons use the background-image 
      property rather than background.

2014-01-10  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * test/album.json: Removed all HTML from the footer.

    * www/common.css: Set the styling on footerContent to preserve newlines 
      from its text.

    * www/album.js: Removed all uses of innerHTML, replacing them with 
      textContent. 

    * www/album.js: Removed unnecessary span elements from property table 
      cells, instead assigning their styles to the cells themselves.

    * www/album.js, www/photo.css: Fixed some styling on the full-screen photo 
      overlay.

    * www/album.css, www/common.cs, www/debug.css, www/index.html, 
      www/photo.css: Removed old MSIE6-compat cruft, simplified styles, and 
      removed unnecessary styles.

    * It's been a while since I've made a change that resulted in less code.

2014-01-08  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * test/album.json: Added actual content to the description field.  Removed 
      the thumbnail field, as I don't needed it for now.

    * www/album.css, www/album.js, www/index.html: Added an album description 
      to album view, displayed above the thumbnail list.

    * www/album.js, www/index.html: Added a full-screen photo overlay to the 
      photo view, which can be toggled on and off when the photo is displayed 
      at less than its full size.

    * www/album.css, www/album.js, www/common.css, www/photo.css: Added an 
      index link to the album view, intended to refer to an index of albums.

    * test/index.json: New file to support an index of albums.  Nothing uses 
      this file at the moment.

    * www/index.html: Added mouse-over tooltips to the navigation arrows.

2014-01-07  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * misc/arrows.svg: New file containing sources for arrow icons.

    * www/back.png, www/next.png, www/prev.png: Replaced the arrow button 
      images with new ones with transparent backgrounds. 

    * www/album.js, www/index.html, www/photo.css: Replaced the img tags for 
      the arrow buttons with CSS background images.

    * www/index.html: Got rid of the "contents" div, since it didn't seem to do 
      anything.

    * www/album.css, www/common.css: Deleted and commented out some old MSIE6-
      compat cruft.

2014-01-06  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/album.js: Re-wrote the argument-parsing logic.  The name of the album 
      JSON file is now an argument.

    * www/album.js: Fixed a bug where the warning panel wouldn't be suppressed 
      when only the hash changes.

    * www/album.js: generatePhotoURL() is now used for all links.

    * www/index.html: Set the class of indexLink to navigationLink so that 
      adding and removing the debug argument to/from it doesn't need to be 
      handled separately from other links.

    * www/album.js: Removed special-case logic for adding/removing the debug 
      argument to/from indexLink.

    * www/album.js (keyHandler): Added new alternate navigation keys.

2014-01-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * www/index.html: Added a Content Security Policy meta header.  AFAIK, only 
      Chrome-based browsers support CSP from meta headers at the moment.

    * www/index.html: Removed inline styles that violate CSP.

    * www/lib.js (getHBorder, getVBorder): Fixed property names so that 
      getProperty() doesn't fall back to eval()-based paths in standards-
      compliant browsers.

    * test/album.json: Added description and thumbnail fields.  Nothing uses 
      them at this time.

2014-01-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * Imported missed files from the previous commit.

    * www/index.js: renamed to album.js

2014-01-05  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * Version 3, as of spring 2013.  Major changes to just about everything.

    * Replaced Pseudo-JSON with real JSON

2013-01-08  Rennie deGraaf  <rennie.degraaf@gmail.com>

    * Initial import of photo_album.
